# N-SentiTrader
## ë‰´ìŠ¤ ê¸°ë°˜ ì£¼ì‹ ê°ì„±ë¶„ì„ ë° ì˜ˆì¸¡ ì‹œìŠ¤í…œ

> **êµìœ¡ìš© í™”ì´íŠ¸ë°•ìŠ¤ ML í”„ë¡œì íŠ¸** - ì´ˆê¸‰ ê°œë°œìž ì–‘ì„±ê³¼ì • í›ˆë ¨ìƒì„ ìœ„í•œ ì‹¤ë¬´ í”„ë¡œì íŠ¸

---

## ðŸ“‹ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)
2. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [í•µì‹¬ ì›Œí¬í”Œë¡œìš°](#í•µì‹¬-ì›Œí¬í”Œë¡œìš°)
5. [ë¹ ë¥¸ ì‹œìž‘](#ë¹ ë¥¸-ì‹œìž‘)
6. [ë””ë ‰í† ë¦¬ êµ¬ì¡°](#ë””ë ‰í† ë¦¬-êµ¬ì¡°)
7. [êµìœ¡ì  ì„¤ê³„ ì² í•™](#êµìœ¡ì -ì„¤ê³„-ì² í•™)

---

## í”„ë¡œì íŠ¸ ì†Œê°œ

N-SentiTraderëŠ” ê¸ˆìœµ ë‰´ìŠ¤ì˜ **í…ìŠ¤íŠ¸ ë§ˆì´ë‹**ê³¼ **ë¨¸ì‹ ëŸ¬ë‹**ì„ í™œìš©í•˜ì—¬ ì£¼ì‹ ì‹œìž¥ì˜ ê°ì„±(ì‹œìž¥ ì‹¬ë¦¬)ì„ ì •ëŸ‰í™”í•˜ê³ , ê°œë³„ ì¢…ëª©ì˜ ì´ˆê³¼ ìˆ˜ìµ(Alpha)ì„ ì˜ˆì¸¡í•˜ëŠ” **ìžë™í™” ì‹œìŠ¤í…œ**ìž…ë‹ˆë‹¤.

### ì™œ í™”ì´íŠ¸ë°•ìŠ¤ ëª¨ë¸ì¸ê°€?

| êµ¬ë¶„ | í™”ì´íŠ¸ë°•ìŠ¤ (ë³¸ í”„ë¡œì íŠ¸) | ë¸”ëž™ë°•ìŠ¤ (LLM ë“±) |
|------|-------------------------|-------------------|
| **í•´ì„ ê°€ëŠ¥ì„±** | âœ… ëª¨ë“  ì˜ˆì¸¡ ê·¼ê±° í™•ì¸ ê°€ëŠ¥ | âŒ ë‚´ë¶€ ìž‘ë™ ë¶ˆíˆ¬ëª… |
| **í•™ìŠµ íš¨ê³¼** | âœ… ì•Œê³ ë¦¬ì¦˜ ì›ë¦¬ ì§ì ‘ í•™ìŠµ | âŒ API í˜¸ì¶œë§Œ í•™ìŠµ |
| **í•˜ë“œì›¨ì–´ ìš”êµ¬** | âœ… ì¼ë°˜ PCì—ì„œ ì‹¤í–‰ | âŒ GPU/ê³ ì‚¬ì–‘ í•„ìš” |
| **ë¹„ìš©** | âœ… ë¬´ë£Œ (ì˜¤í”ˆì†ŒìŠ¤) | âŒ API ë¹„ìš© ë°œìƒ |

### ì£¼ìš” ê¸°ëŠ¥
- ðŸ” **ë‰´ìŠ¤ ìˆ˜ì§‘**: ë„¤ì´ë²„ ë‰´ìŠ¤ ìžë™ í¬ë¡¤ë§ (VPN ë¡œí…Œì´ì…˜ ì§€ì›)
- ðŸ“Š **ê°ì„± ë¶„ì„**: Lasso íšŒê·€ ê¸°ë°˜ ê°ì„±ì‚¬ì „ ìžë™ êµ¬ì¶•
- ðŸ“ˆ **ìˆ˜ìµ ì˜ˆì¸¡**: Time Decay ì ìš© ì´ˆê³¼ìˆ˜ìµ ì˜ˆì¸¡
- ðŸŽ¯ **ìžë™ ìµœì í™”**: AWO(Adaptive Window Optimization) ìŠ¤ìº”
- ðŸ“± **ëŒ€ì‹œë³´ë“œ**: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë° ê²°ê³¼ ì‹œê°í™”

---

## ê¸°ìˆ  ìŠ¤íƒ

```mermaid
graph LR
    subgraph "ë°ì´í„° ê³„ì¸µ"
        PostgreSQL[(PostgreSQL)]
        RabbitMQ[RabbitMQ]
    end
    
    subgraph "ì²˜ë¦¬ ê³„ì¸µ"
        MeCab[MeCab í˜•íƒœì†Œë¶„ì„]
        Polars[Polars DataFrame]
        Sklearn[scikit-learn]
    end
    
    subgraph "ì„œë¹„ìŠ¤ ê³„ì¸µ"
        FastAPI[FastAPI Dashboard]
        Workers[Docker Workers]
    end
    
    PostgreSQL --> Polars
    Polars --> Sklearn
    Sklearn --> PostgreSQL
    RabbitMQ --> Workers
    Workers --> PostgreSQL
    FastAPI --> PostgreSQL
```

| ì˜ì—­ | ê¸°ìˆ  | ì„ íƒ ì´ìœ  |
|------|------|----------|
| **ì–¸ì–´** | Python 3.12 | ë°ì´í„° ê³¼í•™ í‘œì¤€ ì–¸ì–´ |
| **ML í”„ë ˆìž„ì›Œí¬** | scikit-learn | ê²½ëŸ‰, í•´ì„ ê°€ëŠ¥, êµìœ¡ì— ì í•© |
| **ë°ì´í„° ì²˜ë¦¬** | Polars | pandas ëŒ€ë¹„ 10ë°° ë¹ ë¥¸ ì„±ëŠ¥ |
| **í˜•íƒœì†Œ ë¶„ì„** | MeCab | í•œêµ­ì–´ ì²˜ë¦¬ ìµœì , ì‚¬ìš©ìž ì‚¬ì „ ì§€ì› |
| **API ì„œë²„** | FastAPI | ë¹„ë™ê¸°, ìžë™ ë¬¸ì„œí™”, í˜„ëŒ€ì  |
| **ë©”ì‹œì§€ í** | RabbitMQ | ë¶„ì‚° ìž‘ì—… ì²˜ë¦¬, ì•ˆì •ì„± |
| **ë°ì´í„°ë² ì´ìŠ¤** | PostgreSQL | ëŒ€ìš©ëŸ‰ í…ìŠ¤íŠ¸ ì²˜ë¦¬, JSONB ì§€ì› |
| **ì»¨í…Œì´ë„ˆ** | Docker + Compose | í™˜ê²½ ì¼ê´€ì„±, í™•ìž¥ì„± |

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
flowchart TD
    subgraph "1. ë°ì´í„° ìˆ˜ì§‘"
        News[ë„¤ì´ë²„ ë‰´ìŠ¤] --> Collector[News Collector]
        Price[ì£¼ê°€ ë°ì´í„°] --> PriceCollector[Price Collector]
        Collector --> DB[(PostgreSQL)]
        PriceCollector --> DB
    end
    
    subgraph "2. ì „ì²˜ë¦¬"
        DB --> Tokenizer[MeCab Tokenizer]
        Tokenizer --> NGram[N-gram ìƒì„±]
        NGram --> Cache[Token Cache]
    end
    
    subgraph "3. í•™ìŠµ"
        Cache --> TfIdf[TF-IDF Vectorizer]
        TfIdf --> Lasso[Lasso Regression]
        Lasso --> Dict[ê°ì„±ì‚¬ì „]
        Dict --> DB
    end
    
    subgraph "4. ì˜ˆì¸¡"
        Dict --> Scoring[ê°ì„± ì ìˆ˜ ê³„ì‚°]
        Scoring --> Decay[Time Decay ì ìš©]
        Decay --> Prediction[ì˜ˆì¸¡ ê²°ê³¼]
        Prediction --> DB
    end
    
    subgraph "5. ì‹œê°í™”"
        DB --> Dashboard[FastAPI Dashboard]
        Dashboard --> User[ì‚¬ìš©ìž]
    end
```

---

## í•µì‹¬ ì›Œí¬í”Œë¡œìš°

### 1ï¸âƒ£ ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸

```mermaid
sequenceDiagram
    participant S as Scheduler
    participant Q as RabbitMQ
    participant W as Address Worker
    participant B as Body Worker
    participant DB as PostgreSQL
    
    S->>Q: ìˆ˜ì§‘ ìž‘ì—… ìƒì„±
    Q->>W: URL ë°œê²¬ ìž‘ì—… ì „ë‹¬
    W->>DB: ë‰´ìŠ¤ URL ì €ìž¥
    W->>Q: ë³¸ë¬¸ ìˆ˜ì§‘ ìž‘ì—… ë°œí–‰
    Q->>B: ë³¸ë¬¸ ìˆ˜ì§‘ ìž‘ì—… ì „ë‹¬
    B->>DB: ë‰´ìŠ¤ ë³¸ë¬¸ ì €ìž¥
```

### 2ï¸âƒ£ ê°ì„±ì‚¬ì „ í•™ìŠµ í”„ë¡œì„¸ìŠ¤

| ë‹¨ê³„ | ì„¤ëª… | í•µì‹¬ íŒŒë¼ë¯¸í„° |
|------|------|--------------|
| 1. ë°ì´í„° ë¡œë“œ | Nê°œì›” ë‰´ìŠ¤ + ì£¼ê°€ ë°ì´í„° | `window_months` |
| 2. í† í°í™” | MeCab + N-gram ìƒì„± | `ngram_range=(1,3)` |
| 3. ë²¡í„°í™” | TF-IDF ë³€í™˜ (í¬ì†Œ í–‰ë ¬) | `max_features=50000` |
| 4. íšŒê·€ | Lasso íšŒê·€ë¡œ ê°€ì¤‘ì¹˜ í•™ìŠµ | `alpha` |
| 5. ì‚¬ì „ ì €ìž¥ | ìƒìœ„ Top-K ë‹¨ì–´ë§Œ ì €ìž¥ | `top_k=100` |

**Lasso íšŒê·€ ìˆ˜ì‹:**
```
minimize: ||y - XÎ²||Â² + Î±||Î²||â‚
```
- `y`: ì´ˆê³¼ìˆ˜ìµë¥  (Target)
- `X`: TF-IDF í–‰ë ¬ (Features)
- `Î²`: ë‹¨ì–´ë³„ ê°€ì¤‘ì¹˜ (ê°ì„±ì‚¬ì „)
- `Î±`: L1 ì •ê·œí™” ê°•ë„

### 3ï¸âƒ£ ì˜ˆì¸¡ ê³„ì‚° ê³µì‹

```python
# Time Decay í•¨ìˆ˜
decay_weight = exp(-decay_rate * lag_days)

# ê°ì„± ì ìˆ˜ ê³„ì‚°
score = Î£ (word_weight Ã— decay_weight Ã— tf-idf)

# ì˜ˆì¸¡ ì‹ í˜¸
if score > threshold:
    signal = "BUY"
elif score < -threshold:
    signal = "SELL"
else:
    signal = "HOLD"
```

---

## ë¹ ë¥¸ ì‹œìž‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Docker & Docker Compose
- Git

### ì„¤ì¹˜ ë° ì‹¤í–‰

```bash
# 1. ì €ìž¥ì†Œ í´ë¡ 
git clone https://github.com/your-org/N-SentiTrader.git
cd N-SentiTrader

# 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.sample .env
# .env íŒŒì¼ì„ íŽ¸ì§‘í•˜ì—¬ í•„ìš”í•œ ê°’ ìž…ë ¥

# 3. ì»¨í…Œì´ë„ˆ ë¹Œë“œ ë° ì‹¤í–‰
docker-compose up -d --build

# 4. ëŒ€ì‹œë³´ë“œ ì ‘ì†
open http://localhost:8081
```

### ì£¼ìš” URL
| ì„œë¹„ìŠ¤ | URL | ì„¤ëª… |
|--------|-----|------|
| Dashboard | http://localhost:8081 | ë©”ì¸ ëŒ€ì‹œë³´ë“œ |
| Grafana | http://localhost:3000 | ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§ |
| RabbitMQ | http://localhost:15672 | ë©”ì‹œì§€ í ê´€ë¦¬ |

---

## ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
N-SentiTrader/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ collector/          # ë‰´ìŠ¤ ìˆ˜ì§‘ê¸°
â”‚   â”‚   â””â”€â”€ news.py         # ë©”ì¸ í¬ë¡¤ëŸ¬ (35KB)
â”‚   â”œâ”€â”€ collectors/         # ë³´ì¡° ìˆ˜ì§‘ê¸°
â”‚   â”‚   â”œâ”€â”€ price_collector.py
â”‚   â”‚   â””â”€â”€ fundamentals_collector.py
â”‚   â”œâ”€â”€ learner/            # ML í•™ìŠµ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ lasso.py        # Lasso íšŒê·€ í•™ìŠµê¸°
â”‚   â”‚   â””â”€â”€ awo_engine.py   # AWO ìµœì í™” ì—”ì§„
â”‚   â”œâ”€â”€ predictor/          # ì˜ˆì¸¡ ëª¨ë“ˆ
â”‚   â”‚   â””â”€â”€ scoring.py      # ê°ì„± ì ìˆ˜ ê³„ì‚°
â”‚   â”œâ”€â”€ dashboard/          # FastAPI ì›¹ ì„œë²„
â”‚   â”‚   â”œâ”€â”€ routers/        # API ë¼ìš°í„°
â”‚   â”‚   â””â”€â”€ templates/      # HTML í…œí”Œë¦¿
â”‚   â”œâ”€â”€ nlp/                # ìžì—°ì–´ ì²˜ë¦¬
â”‚   â”‚   â””â”€â”€ tokenizer.py    # MeCab í† í¬ë‚˜ì´ì €
â”‚   â””â”€â”€ utils/              # ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ mq.py           # RabbitMQ í—¬í¼
â”‚       â””â”€â”€ metrics.py      # Prometheus ë©”íŠ¸ë¦­
â”œâ”€â”€ docker-compose.yml      # ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
â”œâ”€â”€ main_scheduler.py       # ìž‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬
â””â”€â”€ Dockerfile              # ì´ë¯¸ì§€ ë¹Œë“œ ì„¤ì •
```

---

## êµìœ¡ì  ì„¤ê³„ ì² í•™

### 1. íˆ¬ëª…ì„± (White-Box)
ëª¨ë“  ì˜ˆì¸¡ ê²°ê³¼ì— ëŒ€í•´ **ê·¼ê±°ê°€ ë˜ëŠ” ë‰´ìŠ¤ì™€ í‚¤ì›Œë“œ**ë¥¼ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
```
ì˜ˆì¸¡: "ì‚¼ì„±ì „ìž ìƒìŠ¹ ì˜ˆìƒ (+2.3%)"
ê·¼ê±°: 
  - "ê¸ˆë¦¬ ì¸í•˜" (+0.8) - 3ì¼ ì „ ë‰´ìŠ¤
  - "AI ë°˜ë„ì²´" (+0.6) - 1ì¼ ì „ ë‰´ìŠ¤
  - "ìˆ˜ì¶œ í˜¸ì¡°" (+0.4) - ì˜¤ëŠ˜ ë‰´ìŠ¤
```

### 2. ê²½ëŸ‰í™”
12GB RAM í™˜ê²½ì—ì„œ ì•ˆì •ì ìœ¼ë¡œ ë™ìž‘í•˜ë„ë¡ ì„¤ê³„:
- Generator ê¸°ë°˜ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬
- `min_df=3`ìœ¼ë¡œ í¬ê·€ í† í° ì œê±°
- ìˆœì°¨ì  ìœˆë„ìš° ë°ì´í„° ë¡œë”©

### 3. ëª¨ë“ˆí™”
ê° ì»´í¬ë„ŒíŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥:
```python
# ê°œë³„ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
from src.learner.lasso import LassoLearner

learner = LassoLearner(stock_code="005930")
learner.fetch_data(window_months=3)
learner.train()
```

---

## ðŸ“š ì¶”ê°€ ë¬¸ì„œ

- [ì›Œí¬í”Œë¡œìš° ê°€ì´ë“œ](./docs/workflows.md) - ìƒì„¸ ìž‘ì—… íë¦„ ì„¤ëª…
- [API ë¬¸ì„œ](http://localhost:8081/docs) - ìžë™ ìƒì„± API ë¬¸ì„œ (Swagger)
- [ê°œë°œ ížˆìŠ¤í† ë¦¬](./docs/development_history.md) - 31ê°œ Phase ê°œë°œ ë‚´ì—­

---

## ðŸ“ ë¼ì´ì„ ìŠ¤

Educational Use Only - êµìœ¡ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš© ê°€ëŠ¥

---

*ì´ í”„ë¡œì íŠ¸ëŠ” ë¹…ë°ì´í„° ë¶„ì„ì„ ìœ„í•œ AI ì„œë¹„ìŠ¤ ê°œë°œìž ì–‘ì„±ê³¼ì • í›ˆë ¨ìƒì„ ìœ„í•´ ì œìž‘ë˜ì—ˆìŠµë‹ˆë‹¤.*
