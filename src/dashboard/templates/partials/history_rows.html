
{% for item in history %}
<div class="flex items-center gap-4 p-4 rounded-xl bg-white/5 border border-white/10 hover:border-indigo-500/30 transition-all group">
    <!-- Date & Day -->
    <div class="flex flex-col items-center justify-center w-12 h-12 rounded-lg bg-indigo-500/10 border border-indigo-500/20 shrink-0">
        <span class="text-[10px] uppercase font-bold text-indigo-400">{{ item.day_en }}</span>
        <span class="text-sm font-black text-white">{{ item.date[8:] }}</span>
    </div>
    
    <!-- Signal Icon & Trigger -->
    <div class="flex-1 min-w-0">
        <div class="flex items-center gap-2 mb-1">
            {% if 'Buy' in item.status %}
                <i data-lucide="sun" class="w-4 h-4 text-amber-500"></i>
                <span class="text-xs font-bold text-amber-500">Buy Signal</span>
            {% elif 'Sell' in item.status %}
                <i data-lucide="cloud-lightning" class="w-4 h-4 text-indigo-500"></i>
                <span class="text-xs font-bold text-indigo-400">Sell Signal</span>
            {% else %}
                <i data-lucide="minus" class="w-4 h-4 text-gray-500"></i>
                <span class="text-xs font-bold text-gray-500">Neutral</span>
            {% endif %}
            <span class="text-[10px] text-gray-500 px-1.5 py-0.5 rounded bg-white/5">{{ item.date[:7] }}</span>
        </div>
        <div class="text-[11px] text-gray-400 truncate">
            Primary Driver: <span class="text-gray-300 font-medium">{{ item.keywords or 'Market Sentiment' }}</span>
        </div>
    </div>
    
    <!-- Result & Verification -->
    <div class="text-right shrink-0">
        <div class="mb-1">
            {% if item.actual_return is not none %}
                <span class="text-sm font-mono font-bold {{ 'text-emerald-400' if item.actual_return > 0 else 'text-rose-400' }}">
                    {{ "%+.2f"|format(item.actual_return) }}%
                </span>
            {% else %}
                <span class="text-xs text-gray-600 font-mono">Pending</span>
            {% endif %}
        </div>
        <div>
            {% if item.is_correct is not none %}
                {% if item.is_correct %}
                    <span class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-bold bg-emerald-500/20 text-emerald-400 border border-emerald-500/20">
                        <i data-lucide="check" class="w-3 h-3"></i> Correct
                    </span>
                {% else %}
                    <span class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-bold bg-rose-500/20 text-rose-400 border border-rose-500/20">
                        <i data-lucide="x" class="w-3 h-3"></i> Miss
                    </span>
                {% endif %}
            {% else %}
                <span class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-bold bg-gray-500/20 text-gray-400 border border-gray-500/20">
                    <i data-lucide="clock" class="w-3 h-3"></i> Wait
                </span>
            {% endif %}
        </div>
    </div>
</div>
{% else %}
    {% if offset == 0 %}
    <div class="p-8 text-center text-gray-500 text-sm">No historical signals found.</div>
    {% endif %}
{% endfor %}
